title: 把博客从gitcafe迁移到coding
date: 2016-03-09 16:42:57
tags: 托管平台
categories: 博客之路
---
最近gitcafe被coding收购了，gitcafe上的所有项目很快就要被清空。而官方给用户的出路就是迁移到新东家coding，虽然听到这消息挺烦的，但作为免费用户也不好说什么。而且听说coding的服务要比gitcafe稳定得多，这样也好，希望不会像gitcafe一样隔三差五就访问不了吧。。。接下来，我就记录下我迁移的过程：

## coding-pages
首先在gitcafe按官方指示进行项目一键迁移，把所有仓库都导到coding上去，这一步倒是很快，如果没有使用页面服务什么的就到此为止了。但是对于我这种原来把博客也托管在gitcafe上面的，还得再去了解了解[coding上pages服务](https://coding.net/help/doc/pages/index.html)。

其实操作步骤和其他git服务商提供的差不多，无非也就是导入公钥、开启pages服务、本地建立coding-pages分支、建立本地仓库和remote仓库的联系、然后推送到coding-pages分支。而且我经过试验，也未必一定要用coding-pages分支，gitcafe上原来的gitcafe-pages分支也可以直接用来部署pages服务，虽然不知道这项功能会支持多久，但利用它我们一般的项目pages就可以不用再建新分支直接部署了。

## 开始迁移
好，了解这些后，我们就可以开始迁移博客了，首先按确保你已经在coding上添加了本机的公钥，并在coding上选个分支开启pages服务（上面说了，你可以选新建的coding-pages分支或者原来的gitcafe-pages分支），接着直接在你hexo的`_config.yml`下找到`deploy`字段，添加你在coding上博客仓库的地址和pages服务所在的分支，保存文件。

然后关键的一步来了，**一定要把.deploy文件夹删除后重再新hexo  d一下**，因为hexo是把生成后的博客导到这个目录下，然后你push的其实只是该目录的内容，而且这个目录下的配置并不会自动随你的配置文件更新（不知道hexo3.0改进了没，我用的还是老版本），如果不删除就不会更新和远端仓库的联系，这样你就无法推送到coding上咯。我在一年多前也记录了这个问题，无奈不长记性，这次还在这上面被坑了不少时间T_T。

完成上面的操作，就可以算完成迁移了，以后的博客发布操作还是和以前一样的，pages的访问速度也还OK。

## 重新绑定域名
除了迁移博客的内容，原来的域名也不能晾在那里呀。coding也提供了绑定域名的服务，直接在你的项目主页操作就可以，然后按其指示去你的DNS服务商那里添加一条CNAME记录，域名也就重新绑定好了。而我们的博客迁移到此也就大功告成^_^。



